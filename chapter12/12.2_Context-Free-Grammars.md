## 12.2 上下文无关文法（*Context-Free Grammars*）

在英语和其他自然语言中，最广泛使用的用于建模成分结构的形式系统（*formal system*）是**上下文无关文法**（*Context-Free Grammar*），即 **CFG**。上下文无关文法也被称为**短语结构文法**（*Phrase-Structure Grammars*），其形式上等同于**巴科斯-诺尔范式**（*Backus-Naur Form*），即 BNF。将文法建立在成分结构上的想法可以追溯到心理学家 Wilhelm Wundt (1900)[^1]，但直到 Chomsky (1956)[^2] 和 Backus (1959)[^3] 才被形式化。

上下文无关语法由一组**规则**（*rules*）或**产生式**（*productions*）组成，它们都表达了语言符号可以组合和排序在一起的方式，以及单词和符号的**词典**（*lexicon*）。例如，以下产生式表达了 **NP**（即**名词短语**（*noun phrase*））可以由*专有名词*（*ProperNoun*）或定语（*determiner*）（*Det*）组成，后面跟着一个*名词性词*（*Nominal*）；Nominal 反过来可以由一个或多个 Nouns 组成。[^4]

> *NP* $\rightarrow$ *Det Nominal*  
> *NP* $\rightarrow$ *ProperNoun*  
> *Nominal* $\rightarrow$ *Noun* | *Nominal Noun*  

上下文无关规则可以分层嵌入，所以我们可以把前面的规则和其他的规则结合起来，比如下面的规则，表达了关于词典的情况：

> *Det* $\rightarrow$ *a*  
> *Det* $\rightarrow$ *the*  
> *Noun* $\rightarrow$ *flight*  

CFG 中使用的符号被分为两类。与语言中的词（“the”、“nightclub”）相对应的符号被称为**终结符**（*terminal*）；词典（*lexicon*）是引入这些终结符的规则集。用于抽象表达这些终结符的符号被称为**非终结符**（*non-terminal*）。在上下文无关规则中，箭头（$\rightarrow$）右边的项目是一个或多个终结符和非终结符的有序列表；箭头左边是单个非终结符，表达某种聚类或概括。与词典中每个词相关的非终结符是它的词类或词性。

我们可以从两个方面来考虑 CFG：一个是视为生成句子的装置，一个是为给定句子分配结构的装置。当把 CFG 看作是一个生成器时，我们可以把 $\rightarrow$ 理解为“用右边的符号串重写左边的符号”。

|步骤|结果|
|---|---|
|从符号 *NP* 开始：|*NP*|
|我们可以根据第一条规则将其重写为：|*Det Nominal*|
|然后重写 *Nominal*：|*Det Noun*|
|最后重写词性：|*a flight*|

我们说可以从非终结符 *NP* 推导出字符串 *a flight* 。因此，CFG 可以用来生成一组字符串。这个规则扩展序列被称为词串的**推导**（*derivation*）。通常用一棵**分析树**（*parse tree*）来表示一个推导（通常是倒置显示，根在顶部）。图 12.1 显示了这种推导的树状表示。

![图 12.1](assets/fig12.1.png)

在图 12.1 所示的分析树中，我们可以说节点 *NP* **支配着**（*dominates*）树上的所有节点（*Det*、*Nom*、*Noun*、*a*、*flight*）。我们可以进一步说，它直接支配了节点 *Det* 和 *Nom*。

CFG 所定义的形式语言是由指定的**起始符**（*start symbol*）所推导出来的字符串的集合。每个语法都必须有一个指定的起始符，通常称为 *S*。由于上下文无关文法经常被用来定义句子，所以 *S* 通常表示“sentence”节点，而从 *S* 推导出来的字符串集就是某个简化版英语中的句子集。

[^1]: Wundt,W. 1900. V¨olkerpsychologie: eine Untersuchung der Entwicklungsgesetze von Sprache, Mythus, und Sitte. W. Engelmann, Leipzig. Band II: Die Sprache, Zweiter Teil.
[^2]: Chomsky, N. 1956. Three models for the description of language. IRE Transactions on Information Theory, 2(3):113–124.
[^3]: Backus, J. W. 1959. The syntax and semantics of the proposed international algebraic language of the Zurich ACM-GAMM Conference. Information Processing: Proceedings of the International Conference on Information Processing, Paris. UNESCO.
[^4]: 在谈论这些规则时，我们可以将右箭头 $\rightarrow$ 读为“goes to”，因此我们可以将上面的第一条规则读为“NP goes to Det Nominal”。
